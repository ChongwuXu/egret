var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),MainScreen=function(e){function t(){var t=e.call(this)||this;return t._isLoading=!1,t._loadingComplete=!1,t._loadingTimerComplete=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView()},t.prototype.createView=function(){var e=RES.getRes("start_png"),t=new egret.Bitmap,i=this.stage.stageWidth,r=this.stage.stageHeight;t.texture=e;var a=t.texture.textureWidth,n=t.texture.textureHeight,s=i/r>a/n;t.width=i,t.height=n*i/a,t.y=r-t.height,s&&(t.y+=93),this.addChild(t);var o=new ButtonBegin;o.skinName=skins.ButtonBeginSkin,o.verticalCenter=s?0:10,o.horizontalCenter=0,this.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBegin,this),RES.loadGroup("LoadingScreen")},t.prototype.onClickBegin=function(e){0==this._isLoading&&(this._loadingScreen=new LoadingScreen,this.addChild(this._loadingScreen),this._isLoading=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup("GamePlayScreen"),this._loadingTimer=new egret.Timer(2e3,0),this._loadingTimer.addEventListener(egret.TimerEvent.TIMER,this.onLoadingTimer,this),this._loadingTimer.start())},t.prototype.onClickQuit=function(e){},t.prototype.onResourceLoadComplete=function(e){"GamePlayScreen"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this._loadingComplete=!0,this.enterGamePlay())},t.prototype.onLoadingTimer=function(e){this._loadingTimer.removeEventListener(egret.TimerEvent.TIMER,this.onLoadingTimer,this),this._loadingTimer.stop(),this._loadingTimer=null,this._loadingTimerComplete=!0,this.enterGamePlay()},t.prototype.enterGamePlay=function(){this._loadingComplete&&this._loadingTimerComplete&&(this._isLoading=!1,this.removeChild(this._loadingScreen),this._loadingScreen.Dispose(),this._loadingScreen=null,this._gamePlayScreen=new GamePlayScreen,this.addChild(this._gamePlayScreen))},t}(eui.UILayer);__reflect(MainScreen.prototype,"MainScreen");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function r(r){t.call(i,r,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?r(a):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var AvatarLoopLine=function(){function e(e){this._fixedDelta=1/60,this._layer=0,this._speed=165,this._avatars=null,this._lineConfig=null,this._gamePlay=null,this._curAvatarIdxInShow=0,this._curAvatarGrp=null,this._isPause=!1,this._isValid=!1,this._arrawState=0,this._layer=e}return e.prototype.Dispose=function(){null!=this._gamePlay&&(this._gamePlay.grpArraw.removeEventListener(GameArraw.ARROW_STATE_EVENT,this.onArrawState,this),this._gamePlay=null)},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatars",{get:function(){return this._avatars},enumerable:!0,configurable:!0}),e.prototype.Init=function(e,t){this._isValid=null!=e&&e.length>0,this._lineConfig=e,this._gamePlay=t;var i=5;e.length<i&&(i=e.length);var r=t.grpDownPanel,a=t.origAvatar1;if(0==this._layer&&(r=t.grpUpPanel,a=t.origAvatar2),r.visible=!1,this._isValid){r.visible=!0,this._gamePlay.grpArraw.addEventListener(GameArraw.ARROW_STATE_EVENT,this.onArrawState,this);var n=GameConf.Instance.GetLineById(this._layer);this._speed=n.Speed,this._curAvatarGrp=r,this._avatars=[],this._curAvatarIdxInShow=0;for(var s=0;i>s;++s){var o=GameConf.Instance.GetAvatarById(e[s].AvatarId),h=GameConf.Instance.Pop(o.SkinName);r.addChild(h),h.y=a.y,h.x=e[s].x,this._avatars.push(h)}}},e.prototype.doTween=function(){var e=this;this._avatars[0].x=0,egret.Tween.get(this._avatars[0]).to({x:1280},6500).call(function(){e.doTween()},this)},e.prototype.FixedUpdate=function(){this.UpdateAvatars(GameConf.FIXED_DELTA_TIME)},e.prototype.Update=function(e){},e.prototype.UpdateAvatars=function(e){if(!this._isPause&&this._isValid){for(var t=0;t<this._lineConfig.length;++t)this._lineConfig[t].x+=e*this._speed;var i=this._curAvatarIdxInShow+this._avatars.length+1;this._lineConfig.length<=5&&(i=this._curAvatarIdxInShow-1,0>i&&(i+=this._lineConfig.length)),i>=this._lineConfig.length&&(i-=this._lineConfig.length);var r=this._lineConfig[i];if(r.x>-(r.width+r.Interval)&&this._avatars.length<this._lineConfig.length){var a=GameConf.Instance.GetAvatarById(r.AvatarId),n=GameConf.Instance.Pop(a.SkinName);n.parent!=this._curAvatarGrp&&(this._curAvatarGrp.addChild(n),n.y=this._avatars[0].y),this._avatars.push(n)}var s=this._lineConfig[this._curAvatarIdxInShow];if(s.x>1290){var o=null,h=this._curAvatarIdxInShow-1;0>h&&(h=this._lineConfig.length-1),o=this._lineConfig[h],s.x=o.x-s.width-s.Interval,s.x>-s.width-s.Interval&&(s.x=-s.width-s.Interval),this._curAvatarIdxInShow++,this._curAvatarIdxInShow>=this._lineConfig.length&&(this._curAvatarIdxInShow=0),GameConf.Instance.Push(this._avatars.shift())}for(var t=0;t<this._avatars.length;t++){var l=this._curAvatarIdxInShow+t;l>=this._lineConfig.length&&(l-=this._lineConfig.length),this._avatars[t].x=this._lineConfig[l].x}if(1==this._arrawState)for(var _=this._gamePlay.arrawArea,p=this._gamePlay.grpArraw.localToGlobal(_.x,_.y),d=new egret.Rectangle(p.x,p.y,_.width,_.height),t=0;t<this._avatars.length;++t){var c=this._avatars[t].localToGlobal(this._avatars[t].area.x,this._avatars[t].area.y),u=new egret.Rectangle(c.x,c.y,this._avatars[t].area.width,this._avatars[t].area.height);if(d.intersects(u)){var l=this._curAvatarIdxInShow+t;l>=this._lineConfig.length&&(l-=this._lineConfig.length),GameConf.Instance.RewardId=this._lineConfig[l].RewardId,this._gamePlay.grpArraw.dispatchEvent(new egret.Event(GameArraw.ARROW_TOUCH_EVENT,!1,!1,this._avatars[t]))}}}},e.prototype.onArrawState=function(e){this._arrawState=e.data,2==this._arrawState?this._isPause=!0:this._isPause=!1},e}();__reflect(AvatarLoopLine.prototype,"AvatarLoopLine");var AvatarLoopLineConfig=function(){function e(e){this._id=0,this._items=[],this._interval=[],this._length=0,this._speed=465,this.init(e)}return Object.defineProperty(e.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IntervalRange",{get:function(){return this._interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lenght",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),e.prototype.init=function(e){if(void 0!=e&&null!=e)for(var t=0,i=0;i<e.children.length;++i){var r=e.children[i],a=r.children[0],n=a.children[0],s=r["$ss:Index"];void 0!=s&&null!=s?t=Number(s):t+=1,1==t?this._id=Number(n.text):2==t?this._items=JSON.parse(n.text):4==t?this._interval=JSON.parse(n.text):5==t?this._length=Number(n.text):6==t&&(this._speed=Number(n.text))}},e.prototype.parseBelt=function(e){if(void 0!=e&&null!=e)for(var t=0,i=0;i<e.children.length;++i){var r=e.children[i],a=r.children[0],n=a.children[0],s=r["$ss:Index"];void 0!=s&&null!=s?t=Number(s):t+=1,2==t&&(this._speed=Number(n.text))}},e}();__reflect(AvatarLoopLineConfig.prototype,"AvatarLoopLineConfig");var AvatarLoopLineItem=function(){function e(){this.AvatarId=0,this.RewardId=0,this.Interval=100,this.x=0,this.width=165}return e}();__reflect(AvatarLoopLineItem.prototype,"AvatarLoopLineItem");var GameArraw=function(){function e(e){this._arrowState=0,this._stateFrames=0,this._speed=250,this._deltaSpeed=0,this.ARROW_BEGIN_POS=-682,this.ARROW_END_POS=-232,this._catchAvatar=null,this._speed=e}return e.prototype.Dispose=function(){null!=this._gamePlay&&(this._gamePlay=null)},e.prototype.Init=function(t){this._gamePlay=t,this._arrow=this._gamePlay.grpArraw,this._arrowArea=this._gamePlay.arrawArea,this._imgArrows=[t.arraw1,t.arraw2,t.arraw3],this._arrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArray,this),this._arrow.addEventListener(e.ARROW_TOUCH_EVENT,this.onArrayCatch,this)},e.prototype.doArrowState=function(t){switch(t){case 0:this._imgArrows[0].visible=!0,this._imgArrows[1].visible=!1,this._imgArrows[2].visible=!1,this._arrow.y=this.ARROW_BEGIN_POS;break;case 1:this._imgArrows[0].visible=!0,this._imgArrows[1].visible=!1,this._imgArrows[2].visible=!1,this._arrow.y=this.ARROW_BEGIN_POS;break;case 2:this._imgArrows[0].visible=!1,this._imgArrows[1].visible=!0,this._imgArrows[2].visible=!1}this._arrowState=t,this._stateFrames=0,this._arrow.dispatchEvent(new egret.Event(e.ARROW_STATE_EVENT,!1,!1,t))},e.prototype.simulateCatch=function(){var e=0,t=!0;this._arrow.y=this.ARROW_BEGIN_POS;for(var i=this._gamePlay.grpUpPanel.$children,r=this._gamePlay.grpDownPanel.$children,a=[],n=[],s=0;s<i.length;++s)i[s].x>556||i[s].x<226||i[s].visible&&a.push(i[s]);for(var s=0;s<r.length;++s)r[s].x>556||r[s].x<226||r[s].visible&&n.push(r[s]);var o=GameConf.Instance.GetLineById(0),h=null!=o?o.Speed:0;o=GameConf.Instance.GetLineById(1);var l=null!=o?o.Speed:0;for(this._deltaSpeed=0;t;){for(var s=0;s<a.length;++s)a[s].x+=h*GameConf.FIXED_DELTA_TIME;for(var s=0;s<n.length;++s)n[s].x+=l*GameConf.FIXED_DELTA_TIME;if(e>25){if(this._arrow.y>=this.ARROW_END_POS)t=!1;else{for(var _=this._gamePlay.arrawArea,p=this._gamePlay.grpArraw.localToGlobal(_.x,_.y),d=new egret.Rectangle(p.x,p.y,_.width,_.height),s=0;s<a.length;++s){var c=a[s].localToGlobal(a[s].area.x,a[s].area.y),u=new egret.Rectangle(c.x,c.y,a[s].area.width,a[s].area.height);d.intersects(u)&&(egret.log("Hello rect: "+e+"arrow: "+this._arrow.y+" --: "+d.topLeft+" arect:"+u.topLeft),t=!1,d.x<u.x?this._deltaSpeed=-(3840/(e-24)+16*Math.random()):this._deltaSpeed=3840/(e-24)+16*Math.random())}for(var s=0;s<n.length;++s){var c=n[s].localToGlobal(n[s].area.x,n[s].area.y),u=new egret.Rectangle(c.x,c.y,n[s].area.width,n[s].area.height);d.intersects(u)&&(t=!1,d.x<u.x?this._deltaSpeed=-(3840/(e-24)+16*Math.random()):this._deltaSpeed=3840/(e-24)+16*Math.random())}}this._arrow.y+=GameConf.FIXED_DELTA_TIME*this._speed}e++}},e.prototype.FixedUpdate=function(){switch(this._arrowState){case 0:break;case 1:if(10==this._stateFrames)this._imgArrows[0].visible=!1,this._imgArrows[1].visible=!0;else if(20==this._stateFrames)this._imgArrows[1].visible=!1,this._imgArrows[2].visible=!0;else if(this._stateFrames>25&&(this._arrow.y+=GameConf.FIXED_DELTA_TIME*(this._speed+this._deltaSpeed),this._arrow.y>=this.ARROW_END_POS))return this._arrow.y=this.ARROW_END_POS,void this.doArrowState(2);break;case 2:if(0==this._stateFrames&&(this._imgArrows[2].visible=!1,this._imgArrows[1].visible=!0),this._stateFrames>=30&&(this._arrow.y-=GameConf.FIXED_DELTA_TIME*this._speed,null!=this._catchAvatar&&(this._catchAvatar.y-=GameConf.FIXED_DELTA_TIME*this._speed),this._arrow.y<=this.ARROW_BEGIN_POS))return this._arrow.y=this.ARROW_BEGIN_POS,this.doArrowState(0),void(null!=this._catchAvatar&&(this._arrow.dispatchEvent(new egret.Event(e.ARROW_REWARD_EVENT,!1,!1)),this._catchAvatar.x=this._avatarOrigPos.x,this._catchAvatar.y=this._avatarOrigPos.y,this._catchAvatar.isPause=!1,this._catchAvatar=null))}this._stateFrames++},e.prototype.Update=function(e){},e.prototype.onArray=function(e){0==this._arrowState&&this.doArrowState(1)},e.prototype.onArrayCatch=function(e){if(this._catchAvatar=e.data,null!=this._catchAvatar){egret.log("Hello frame: "+this._stateFrames+" arrow: "+this._arrow.y),this._avatarOrigPos=new egret.Point(this._catchAvatar.x,this._catchAvatar.y);var t=this._arrow.localToGlobal(this._arrowArea.x,this._arrowArea.y),i=this._catchAvatar.globalToLocal(t.x,t.y),r=new egret.Point;r.x=this._avatarOrigPos.x+i.x-this._catchAvatar.area.x,r.y=this._avatarOrigPos.y+i.y-this._catchAvatar.area.y,this._catchAvatar.x=r.x,this._catchAvatar.y=r.y,this._catchAvatar.isPause=!0,this.doArrowState(2)}},e.ARROW_STATE_EVENT="arrow_state_changed",e.ARROW_TOUCH_EVENT="arrow_catch_state",e.ARROW_REWARD_EVENT="arrow_get_reward",e}();__reflect(GameArraw.prototype,"GameArraw");var GameConf=function(){function e(){this._avatarConfigs=[],this._rewardConfigs=[],this._lineConfigs=[],this._avatarPool={}}return Object.defineProperty(e,"Instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.Init=function(){RES.getResByUrl("resource/config/TV_doll.xml",this.onXmlLoaded,this,RES.ResourceItem.TYPE_XML)},e.prototype.onXmlLoaded=function(e,t){for(var i=e,r=0;r<i.children.length;++r){var a=i.children[r];if("Worksheet"==a.name){var n=a["$ss:Name"];"avartar"==n?this.processXmlAvatar(a):"reward"==n?this.processXmlReward(a):"array"==n?this.processXmlArray(a):"belt"==n&&this.processXmlBelt(a)}}},e.prototype.getChildByName=function(e,t){for(var i=0;i<t.children.length;++i){var r=t.children[i];if(r.name==e)return r}return null},e.prototype.processXmlAvatar=function(e){var t=this.getChildByName("Table",e);if(null!=t)for(var i=0,r=0;r<t.children.length;++r){var a=t.children[r];if("Row"==a.name){if(i>0){var n=new AvatarConfig(a);this._avatarConfigs.push(n)}i++}}},e.prototype.processXmlReward=function(e){var t=this.getChildByName("Table",e);if(null!=t)for(var i=0,r=0;r<t.children.length;++r){var a=t.children[r];if("Row"==a.name){if(i>0){var n=new RewardConfig(a);this._rewardConfigs.push(n)}i++}}},e.prototype.processXmlArray=function(e){var t=this.getChildByName("Table",e);if(null!=t)for(var i=0,r=0;r<t.children.length;++r){var a=t.children[r];if("Row"==a.name){if(i>0){var n=new AvatarLoopLineConfig(a);this._lineConfigs.push(n)}i++}}},e.prototype.processXmlBelt=function(e){var t=this.getChildByName("Table",e);if(null!=t)for(var i=0,r=0;r<t.children.length;++r){var a=t.children[r];if("Row"==a.name){if(i>0){var n=this._lineConfigs[i-1];n.parseBelt(a)}i++}}},e.prototype.GetRewardById=function(e){for(var t=0;t<this._rewardConfigs.length;++t)if(this._rewardConfigs[t].Id==e)return this._rewardConfigs[t];return null},e.prototype.GetAvatarById=function(e){for(var t=0;t<this._avatarConfigs.length;++t)if(this._avatarConfigs[t].Id==e)return this._avatarConfigs[t];return null},e.prototype.GetLineById=function(e){for(var t=0;t<this._lineConfigs.length;++t)if(this._lineConfigs[t].Id==e)return this._lineConfigs[t];return null},e.prototype.GetLine=function(e){for(var t=[],i=0;i<this._lineConfigs.length;++i)if(this._lineConfigs[i].Id==e)for(var r=this._lineConfigs[i],a=-(165*e+Math.floor(165*Math.random())),n=0;n<r.Lenght;++n){var s=Math.floor(Math.random()*r.Items.length),o=r.IntervalRange[0]+Math.floor(Math.random()*(r.IntervalRange[1]-r.IntervalRange[0])),h=new AvatarLoopLineItem;h.AvatarId=r.Items[s][0],h.RewardId=r.Items[s][1],h.Interval=o,a-=0==n?165:165+o,h.x=a,t.push(h)}return t},e.prototype.Push=function(e){var t=this._avatarPool[e.skinName];void 0==t&&(t=[],this._avatarPool[e.skinName]=t),t.push(e)},e.prototype.Pop=function(e){var t=this._avatarPool[e];return void 0==t?Avatar.createAvatar(e):t.length>0?t.pop():Avatar.createAvatar(e)},e.FIXED_DELTA_TIME=1/60,e._instance=null,e}();__reflect(GameConf.prototype,"GameConf");var GamePlayScreen=function(e){function t(){var t=e.call(this)||this;return t._lineUp=null,t._lineDown=null,t._arrow=null,t._fixedTime=0,t._updateTime=0,t._frames=0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView()},t.prototype.createView=function(){var e=this;this.stage.frameRate=30,this._gameGrp=new GamePlayGroup;var t=this.stage.stageWidth,i=this.stage.stageHeight;this._gameGrp.width=1280,this._gameGrp.height=960,this._gameGrp.scaleX=t/this._gameGrp.width,this._gameGrp.scaleY=this._gameGrp.scaleX,this._gameGrp.y=(i*this._gameGrp.scaleX-this._gameGrp.height)/2,this.addChild(this._gameGrp),this._lineUp=new AvatarLoopLine(0),this._lineUp.Init(GameConf.Instance.GetLine(0),this._gameGrp),this._lineDown=new AvatarLoopLine(1),this._lineDown.Init(GameConf.Instance.GetLine(1),this._gameGrp),this._arrow=new GameArraw(350),this._arrow.Init(this._gameGrp),this._gameGrp.grpArraw.addEventListener(GameArraw.ARROW_REWARD_EVENT,this.onGetReward,this),this._fixedTime=egret.getTimer()/1e3,this._updateTime=this._fixedTime,egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){e.Update()}})},t.prototype.FixedUpdate=function(){this._lineUp.FixedUpdate(),this._lineDown.FixedUpdate(),this._arrow.FixedUpdate()},t.prototype.Update=function(){var e=egret.getTimer()/1e3,t=e-this._updateTime;this._updateTime=e;for(var i=this._fixedTime;i<this._updateTime;i+=GameConf.FIXED_DELTA_TIME)this.FixedUpdate(),this._fixedTime+=GameConf.FIXED_DELTA_TIME;this._lineUp.Update(t),this._lineDown.Update(t),this._arrow.Update(t)},t.prototype.onGetReward=function(e){if(null==this._rewardPage){this._rewardPage=new GameRewardGroup;var t=this.stage.stageWidth,i=this.stage.stageHeight;this._rewardPage.x=(t-this._rewardPage.width)/2,this._rewardPage.y=(i-this._rewardPage.height)/2,this._rewardPage.btnplay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickPlayAgain,this)}this.addChild(this._rewardPage);var r=GameConf.Instance.GetRewardById(GameConf.Instance.RewardId);null!=r&&(this._rewardPage.labItemName.text=r.Name,this._rewardPage.labDesc.text=r.Description)},t.prototype.onClickPlayAgain=function(e){null!=this._rewardPage&&this.removeChild(this._rewardPage)},t}(eui.UILayer);__reflect(GamePlayScreen.prototype,"GamePlayScreen");var LoadingScreen=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.Dispose=function(){null!=this._grpLoading&&(this.removeChild(this._grpLoading),this._grpLoading.Dispose(),this._grpLoading=null)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._grpLoading=new LoadingGroup;var t=this.stage.stageWidth,i=this.stage.stageHeight;this._grpLoading.width=1280,this._grpLoading.height=960,this._grpLoading.scaleX=t/this._grpLoading.width,this._grpLoading.scaleY=this._grpLoading.scaleX,this._grpLoading.y=(i*this._grpLoading.scaleX-this._grpLoading.height)/2,this.addChild(this._grpLoading)},t}(eui.UILayer);__reflect(LoadingScreen.prototype,"LoadingScreen");var AvatarConfig=function(){function e(e){this._name="",this._avatarSkin="",this._desc="",this._id=0,this.init(e)}return Object.defineProperty(e.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SkinName",{get:function(){return this._avatarSkin},enumerable:!0,configurable:!0}),e.prototype.init=function(e){if(null!=e)for(var t=0,i=0;i<e.children.length;++i){var r=e.children[i],a=r.children[0],n=a.children[0],s=r["$ss:Index"];void 0!=s&&null!=s?t=Number(s):t+=1,1==t?this._id=Number(n.text):2==t?this._name=n.text:3==t?this._desc=n.text:4==t&&(this._avatarSkin=n.text)}},e}();__reflect(AvatarConfig.prototype,"AvatarConfig");var RewardConfig=function(){function e(e){this._id=0,this._name="",this._desc="",this._rewardSkin="",this._rate=0,this._score=0,this.init(e)}return Object.defineProperty(e.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Description",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RewardSkinName",{get:function(){return this._rewardSkin},enumerable:!0,configurable:!0}),e.prototype.init=function(e){if(null!=e)for(var t=0,i=0;i<e.children.length;++i){var r=e.children[i],a=r.children[0],n=a.children[0],s=r["$ss:Index"];void 0!=s&&null!=s?t=Number(s):t+=1,1==t?this._id=Number(n.text):2==t?this._name=n.text:3==t?this._rewardSkin=n.text:4==t?this._rate=Number(n.text):5==t&&(this._score=Number(n.text))}},e}();__reflect(RewardConfig.prototype,"RewardConfig");var SplashScreen=function(e){function t(){var t=e.call(this)||this;return t._isThemeLoadEnd=!1,t._isPreloadEnd=!1,t._isSplashTimeout=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.stage.frameRate=30;var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),GameConf.Instance.Init(),this.createView()},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.loadGroup("MainScreen")},t.prototype.onThemeLoadComplete=function(){this._isThemeLoadEnd=!0,this.doSplashEnd()},t.prototype.onResourceLoadComplete=function(e){"MainScreen"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),this._isPreloadEnd=!0,this.doSplashEnd())},t.prototype.onResourceLoadError=function(e){console.warn("Group: "+e.groupName+" has failed."),this.onResourceLoadComplete(e)},t.prototype.doSplashEnd=function(){if(this._isPreloadEnd&&this._isSplashTimeout&&this._isThemeLoadEnd){var e=new MainScreen;this.stage.addChild(e),this.stage.removeChild(this)}},t.prototype.createView=function(){function e(e,r){if(r==t.BG_IMAGE){var a=new egret.Bitmap,n=i.stage.stageWidth,s=i.stage.stageHeight;a.texture=e;var o=a.texture.textureWidth,h=a.texture.textureHeight;o>h?(a.width=n,a.height=h*n/o,a.y=(s-a.height)/2):(a.width=o*s/h,a.height=s,a.x=(n-a.width)/2),i.addChild(a);var l=new egret.Timer(2e3,1);l.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),i.mSplashTimer=l,i.mSplashTimer.start()}}var i=this;RES.getResByUrl(t.BG_IMAGE,e,this)},t.prototype.onTimerComplete=function(e){this.mSplashTimer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.mSplashTimer.stop(),this.mSplashTimer=null,this._isSplashTimeout=!0,this.doSplashEnd()},t.BG_IMAGE="resource/assets/logo_960.jpg",t}(eui.UILayer);__reflect(SplashScreen.prototype,"SplashScreen");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,r){function a(e){t.call(r,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(r))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Avatar=function(e){function t(t){var i=e.call(this)||this;return i.isPause=!1,i._frame=0,null!=t?i.skinName=t:i.createSkinName(),i}return __extends(t,e),t.createAvatar=function(e){var i=e.toLowerCase(),r=null;switch(i){case"g1":r=new t(skins.AvatarG1Skin);break;case"ht1":r=new t(skins.AvatarHt1Skin);break;case"j1":r=new t(skins.AvatarJ1Skin);break;case"t1":r=new t(skins.AvatarT1Skin);break;case"x1":r=new t(skins.AvatarX1Skin);break;default:r=new t}return r},t.prototype.Dispose=function(){this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer=null)},t.prototype.createSkinName=function(){this.skinName=skins.AvatarSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._timer=new egret.Timer(500,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start()},t.prototype.onTimer=function(e){if(!this.isPause){var t=this._frame%2==0;this.avatar1.$setVisible(t),this.avatar2.$setVisible(!t),this._frame++}},t.prototype.setAvatar=function(e,t){this.avatar1.texture=RES.getRes(e),this.avatar2.texture=RES.getRes(t)},t}(eui.Component);__reflect(Avatar.prototype,"Avatar");var ButtonBegin=function(e){function t(){var t=e.call(this)||this;return t._timer=null,t._frame=0,t}return __extends(t,e),t.prototype.Dispose=function(){null!=this._timer&&(this._timer.stop(),this._timer=null)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._timer=new egret.Timer(500,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start()},t.prototype.onTimer=function(e){var t=this._frame%2==0;this.bgImage.$setVisible(t),this.bgImage0.$setVisible(!t),this._frame++},t}(eui.Button);__reflect(ButtonBegin.prototype,"ButtonBegin");var ButtonHuang=function(e){function t(){var t=e.call(this)||this;return t.skinName=skins.ButtonHuangSkin,t}return __extends(t,e),t.prototype.Dispose=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Button);__reflect(ButtonHuang.prototype,"ButtonHuang");var GamePlayGroup=function(e){function t(){var t=e.call(this)||this;return t.skinName=skins.GamePlaySkin,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),null!=this.origAvatar1&&this.origAvatar1.$setVisible(!1),null!=this.origAvatar2&&this.origAvatar2.$setVisible(!1)},t}(eui.Component);__reflect(GamePlayGroup.prototype,"GamePlayGroup");var GameRewardGroup=function(e){function t(){var t=e.call(this)||this;return t.skinName=skins.GameRewardSkin,t}return __extends(t,e),t}(eui.Component);__reflect(GameRewardGroup.prototype,"GameRewardGroup");var LoadingGroup=function(e){function t(){var t=e.call(this)||this;return t._frame=0,t.skinName=skins.LoadingSkin,t}return __extends(t,e),t.prototype.Dispose=function(){null!=this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer=null)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._timer=new egret.Timer(500,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start()},t.prototype.onTimer=function(e){var t=this._frame%4;this.load_1.$setVisible(0==t),this.load_2.$setVisible(1==t),this.load_3.$setVisible(2==t),this.load_4.$setVisible(3==t),this.load_j_1.$setVisible(0==t||2==t),this.load_j_2.$setVisible(1==t||3==t),this._frame++},t}(eui.Component);__reflect(LoadingGroup.prototype,"LoadingGroup");